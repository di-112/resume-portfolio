import Swiper from"https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.esm.browser.min.js";new Swiper(".swiper",{spaceBetween:24,slidesPerView:3,autoplay:!1,navigation:{nextEl:".works__button-next",prevEl:".works__button-prev"},pagination:{el:".swiper-pagination"}}),window.addEventListener("load",windowLoadHandler,!1);let sphereRad=280,scale=1;function windowLoadHandler(){canvasApp()}function canvasApp(){let e=document.getElementById("sphere"),t=document.getElementById("sphere-wrap"),o=e.getContext("2d"),a,n,A,r,l,s,i,d,c,u,h,m,p,v,g,f,y,k,b,w,_,x,L,S,C,T,E,M,X,q,V,B,N,j,I,R,Y;function P(){r=0,l=8,d=1,a=e.width=t.offsetWidth,n=e.height=t.offsetHeight,c=400,h=a/2,m=n/2,p=c-2,s={},i={},w=.1,_=.1,x=.1,L=-0,k=2.5,f=0,y=-3-sphereRad,b=-750,g=2*Math.PI/1200,v=0,A=setInterval(z,10/24)}function z(){if(0<=++r)for(r=0,B=0;B<l;B++){N=2*Math.random()*Math.PI,j=Math.acos(2*Math.random()-1),I=sphereRad*Math.sin(j)*Math.cos(N),R=sphereRad*Math.sin(j)*Math.sin(N),Y=sphereRad*Math.cos(j);var e=function(e,t,o,a,n,r){let l;null!=i.first?null!=(l=i.first).next?(i.first=l.next,l.next.prev=null):i.first=null:l={};null==s.first?((s.first=l).prev=null,l.next=null):(l.next=s.first,s.first.prev=l,(s.first=l).prev=null);l.x=e,l.y=t,l.z=o,l.velX=a,l.velY=n,l.velZ=r,l.age=0,l.dead=!1,Math.random()<.5?l.right=!0:l.right=!1;return l}(I,f+R,y+Y,.002*I,.002*R,.002*Y);e.attack=50,e.hold=50,e.decay=100,e.initValue=0,e.holdValue=d,e.lastValue=0,e.stuckTime=90+20*Math.random(),e.accelX=0,e.accelY=L,e.accelZ=0}for(v=(v+g)%(2*Math.PI),E=Math.sin(v),M=Math.cos(v),o.clearRect(0,0,a,n),S=s.first;null!=S;){var t;T=S.next,S.age++,S.age>S.stuckTime&&(S.velX+=S.accelX+w*(2*Math.random()-1),S.velY+=S.accelY+_*(2*Math.random()-1),S.velZ+=S.accelZ+x*(2*Math.random()-1),S.x+=S.velX,S.y+=S.velY,S.z+=S.velZ),X=M*S.x+E*(S.z-y),q=-E*S.x+M*(S.z-y)+y,u=scale*c/(c-q),S.projX=X*u+h,S.projY=S.y*u+m,S.age<S.attack+S.hold+S.decay?S.age<S.attack?S.alpha=(S.holdValue-S.initValue)/S.attack*S.age+S.initValue:S.age<S.attack+S.hold?S.alpha=S.holdValue:S.age<S.attack+S.hold+S.decay&&(S.alpha=(S.lastValue-S.holdValue)/S.decay*(S.age-S.attack-S.hold)+S.holdValue):S.dead=!0,(C=S.projX>a||S.projX<0||S.projY<0||S.projY>n||q>p)||S.dead?(t=void 0,t=S,s.first==t?null!=t.next?(t.next.prev=null,s.first=t.next):s.first=null:null==t.next?t.prev.next=null:(t.prev.next=t.next,t.next.prev=t.prev),null==i.first?((i.first=t).prev=null,t.next=null):(t.next=i.first,i.first.prev=t,(i.first=t).prev=null)):(V=1<(V=1-q/b)?1:V<0?0:V,o.fillStyle="#08fdd8",o.beginPath(),o.arc(S.projX,S.projY,u*k,0,2*Math.PI,!1),o.closePath(),o.fill()),S=T}}P(),window.addEventListener("resize",P,!1)}const modalsData=[{id:"game-for-memory",name:"Игра для развития памяти",description:"Игра, в которой необходимо за отведенное время открыть все парные ячейки",stack:"React, TS, Redux, Framer Motion, Scss, Eslint, Webpack",url:"https://di-112.github.io/game-for-memory-react",githubUrl:"https://github.com/di-112/game-for-memory-react"},{id:"books-shop",name:"Магазин книг",description:"Проект представляет из себя небольшой магазин книг с возможностью фильтрации товаров и их добавлением в корзину",stack:"React, TS, Zustand, Material UI, React Query, Eslint, Vite",url:"https://di-112.github.io/books-shop/",githubUrl:"https://github.com/di-112/books-shop"},{id:"bets-statistics",name:"Аналитика ставок на футбол",description:"Приложение предназначено для ведения стастики ставок на футбол с возможностью выбора лиги. Для приложения также написан собственный backend и развернут сервер на ruvds",stack:"React, TS, AntDesign, MobX, Axios, Eslint, Webpack",stackBack:"Sqlite, Knex, Express",url:"http://195.133.48.137:3000",githubUrl:"https://github.com/di-112/bets-statistics-react"}],buttons=document.querySelectorAll(".works__item button"),modalNode=document.querySelector(".modal"),headerContent=document.querySelector(".header__content"),modalButtonClose=document.querySelector(".modal__close"),modalOverlay=document.querySelector(".modal__overlay"),openModal=()=>{modalNode.classList.add("open"),document.body.style.overflowY="hidden"},hideModal=()=>{modalNode.classList.remove("open"),document.body.style.overflowY="auto"},scrollTo=(modalButtonClose.addEventListener("click",hideModal),modalOverlay.addEventListener("click",hideModal),console.log({buttons:buttons}),buttons.forEach(e=>e.addEventListener("click",t=>{var e=modalsData.find(({id:e})=>e===t.target.dataset?.projectid);console.log(t.target.dataset),console.log({modalData:e}),modalNode.querySelector(".modal__title").textContent=e.name,modalNode.querySelector(".description__content").textContent=e.description,e.stackBack?modalNode.querySelector(".stack__content").innerHTML=`<div>${e.stack}</div><br/><div>${e.stackBack}</div>`:modalNode.querySelector(".stack__content").textContent=e.stack,modalNode.querySelector(".modal__img").style.background=`url(${e.img}) center / cover`,modalNode.querySelector(".url__content").href=e.url,modalNode.querySelector(".url__content").textContent=e.url,modalNode.querySelector(".github-url__content").href=e.githubUrl,modalNode.querySelector(".github-url__content").textContent=e.githubUrl,openModal()})),e=>e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}));function progressBar(){var e=document.documentElement.scrollTop,t=document.documentElement.scrollHeight-document.documentElement.clientHeight;document.querySelector(".progress").style.width=e/t*100+"%"}function onEntry(e){e.forEach(e=>{e.target.classList.contains("show")&&e.target.classList.remove("show"),e.isIntersecting&&e.target.classList.add("show")})}document.querySelectorAll("nav a").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),scrollTo(document.querySelector("#"+e.target.dataset.path))})}),document.querySelector(".preview__button").addEventListener("click",()=>{scrollTo(document.querySelector("#skills"))}),window.addEventListener("load",progressBar),window.addEventListener("resize",progressBar),window.addEventListener("scroll",progressBar,{passive:!0});const options={threshold:[.5]},observer=new IntersectionObserver(onEntry,options);document.querySelectorAll("section").forEach(e=>observer.observe(e));let activeLink=null;const findActiveLink=()=>{var e=document.querySelector("section.show");e&&(activeLink&&activeLink.classList.remove("active"),(e=document.querySelector(`.nav__item a[data-path='${e.id}']`)).classList.add("active"),activeLink=e)};window.addEventListener("scroll",findActiveLink,{passive:!0}),document.addEventListener("DOMContentLoaded",()=>{findActiveLink()});